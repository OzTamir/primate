<html data-ng-app="KongDash" lang="en">
<head><meta charset="UTF-8" />
<meta name=viewport content="width=device-width, initial-scale=1"/>
<title>KongDash</title>
<link rel="stylesheet" type="text/css" href="css/roboto.css" />
<link rel="stylesheet" type="text/css" href="css/material-icons.css" />
<link rel="stylesheet" type="text/css" href="css/animations.css" />
<link rel="stylesheet" type="text/css" href="css/theme-defaults.css" />
<link rel="stylesheet" type="text/css" href="css/layout.css" />
</head>
<body class="body">

<div class="app-layout hidden">
<aside class="drawer">
    <div class="branding">KongDash</div><!-- .branding -->
    <nav class="navigation">
        <div class="navigation__title">Node</div><!-- .navigation__title -->
        <ul class="navigation__menu">
            <li><a class="navigation__link active" data-ng-href="#!/"><span class="material-icons">view_quilt</span><span>Dashboard</span></a></li>
            <li><a class="navigation__link active" data-ng-href="#!/health"><span class="material-icons">cloud_done</span><span>Health</span></a></li>
        </ul><!-- .navigation__menu -->
        <hr />
        <div class="navigation__title">Objects</div><!-- .navigation__title -->
        <ul class="navigation__menu">
            <li><a class="navigation__link" data-ng-href="#!/services"><span class="material-icons">settings_input_component</span><span>Services</span></a></li>
            <li><a class="navigation__link" data-ng-href="#!/plugins"><span class="material-icons">extension</span><span>Plugins</span></a></li>
            <li><a class="navigation__link" data-ng-href="#!/certificates"><span class="material-icons">verified_user</span><span>Certificates</span></a></li>
            <li><a class="navigation__link" data-ng-href="#!/upstreams"><span class="material-icons">backup</span><span>Upstreams</span></a></li>
            <li><a class="navigation__link" data-ng-href="#!/consumers"><span class="material-icons">person_pin</span><span>Consumers</span></a></li>
        </ul><!-- .navigation__menu -->
    </nav><!-- .navigation -->
</aside>

<main class="content">
    <header class="content__header" data-ng-controller="HeaderController">
        <div class="navigate" data-ng-if="viewFrame.prevUrl.length>=1">
            <a href="{{viewFrame.prevUrl}}" title="Previous page"><span class="material-icons">arrow_back</span></a>
        </div>
        <div class="title">{{viewFrame.title}}</div>
        <div class="actions" data-ng-if="viewFrame.actionButtons.length>=1">
            <button data-ng-repeat="button in viewFrame.actionButtons" data-target="{{button.target}}" data-url="{{button.url}}" data-redirect="{{button.redirect || viewFrame.prevUrl}}" type="button" class="{{button.styles}}">{{button.displayText}}</button>
        </div>
    </header>
    <footer class="footer" data-ng-controller="FooterController">
        <section class="footer__window">
            <div class="activity-log">
                <ul><li data-ng-repeat="log in eventLogs">[<span>{{log.timestamp}}</span>]&nbsp;<span class="log-{{log.className}}">{{log.highlight}}</span> : <span>{{log.message}}</span></li></ul>
            </div><!-- .activity-window -->
        </section><!-- .footer__window -->

        <section id="index__ftBase" class="footer__base"><form>
            <ul class="base-menu">
                <li><label class="checkbox warning"><input type="checkbox" id="index__chk01" name="toggleLogger"> Activity Log</label> </li>
                <li>localhost:8001</li>
                <li>version 0.6.0</li>
            </ul>
        </form></section>
    </footer>
    <section id="index__ngView" class="content__wrapper {{$root.ngViewAnimation}}" data-ng-view="">Loading...</section>
</main>
</div><!-- .app-layout.hidden -->

<script type="text/javascript">
if (typeof module === 'object') {
    window.module = module;
    module = undefined;
}

const {ipcRenderer} = require('electron');
const kongConfig    = ipcRenderer.sendSync('get-config', 'kong');
const appConfig     = ipcRenderer.sendSync('get-config', 'app');

const ngDependency  = ['ngRoute'];
</script>

<script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="js/angular.min.js"></script>
<script type="text/javascript" src="js/angular-route.min.js"></script>
<script type="text/javascript" src="js/angular-animate.min.js"></script>
<script type="text/javascript" src="js/angular-base64.min.js"></script>
<script type="text/javascript" src="scripts/kongdash-app.js"></script>
<script type="text/javascript" src="js/Chart.bundle.min.js"></script>

<script type="text/javascript" src="scripts/app-index.js"></script>

<script type="text/javascript" src="controllers/dashboard.js"></script>
<script type="text/javascript" src="controllers/plugin-list.js"></script>
<script type="text/javascript" src="controllers/settings.js"></script>

<script type="module">
    import LoggerFactory from './components/logger-factory.js';
    import TokenInputDirective from './components/token-input-directive.js'
    import MultiCheckDirective from './components/multi-check-directive.js';

    import HeaderController from './controllers/header.js';
    import FooterController from './controllers/footer.js';

    import ServiceListController from './controllers/service-list.js';
    import ServiceEditController from './controllers/service-edit.js';

    import RouteEditController from './controllers/route-edit.js';

    import CertificateListController from './controllers/certificate-list.js';
    import CertificateEditController from './controllers/certificate-edit.js';

    import TrustedCAEditController from './controllers/ca-edit.js';

    import UpstreamListController from './controllers/upstream-list.js';
    import UpstreamEditController from './controllers/upstream-edit.js';

    import ConsumerListController from './controllers/consumer-list.js';
    import ConsumerEditController from './controllers/consumer-edit.js';

    import PluginEditController from './controllers/plugin-edit.js';

    app.factory('logger', LoggerFactory)

    app.directive('tokenInput', ['$window', TokenInputDirective]);
    app.directive('multiCheck', ['$window', MultiCheckDirective]);

    app.controller('HeaderController', ['$scope', 'viewFrame', HeaderController]);
    app.controller('FooterController', ['$window', '$scope', '$element', '$http', 'logger', 'viewFrame', 'toast', FooterController]);

    app.controller('ServiceListController', ['$window', '$scope', 'ajax', 'viewFrame', 'toast', 'logger', ServiceListController]);
    app.controller('ServiceEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', ServiceEditController]);
    app.controller('RouteEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', RouteEditController]);
    app.controller('CertificateListController', ['$window', '$scope', 'ajax', 'viewFrame', 'toast', 'logger', CertificateListController]);
    app.controller('CertificateEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', CertificateEditController]);
    app.controller('TrustedCAEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', 'logger', TrustedCAEditController]);
    app.controller('UpstreamListController', ['$scope', 'ajax', 'viewFrame', 'toast', UpstreamListController]);
    app.controller('UpstreamEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', UpstreamEditController]);
    app.controller('ConsumerListController', ['$scope', 'ajax', 'viewFrame', 'toast', ConsumerListController]);
    app.controller('ConsumerEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', ConsumerEditController]);
    app.controller('PluginEditController', ['$window', '$scope', '$routeParams', 'ajax', 'viewFrame', 'toast', PluginEditController]);
</script>

<script type="text/javascript">
(function (angular) {
    angular.element('.app-layout').fadeIn({ duration: 1000 });
})(window.angular);
</script>
</body>
</html>
