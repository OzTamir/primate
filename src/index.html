<html data-ng-app="KongDash" lang="en">
<head><meta charset="UTF-8" />
<meta name=viewport content="width=device-width, initial-scale=1"/>
<title>KongDash</title>
<link rel="stylesheet" type="text/css" href="css/roboto.css" />
<link rel="stylesheet" type="text/css" href="css/material-icons.css" />
<link rel="stylesheet" type="text/css" href="css/animations.css" />
<link id="theme-switch" rel="stylesheet" type="text/css" href="css/default-dark-theme.css" />
<link rel="stylesheet" type="text/css" href="css/layout.css" />
</head>
<body class="body">

<div class="app-layout hidden">
<aside class="drawer">
    <div class="icon"><div>KongDash</div></div>
    <nav class="navigation">
        <a class="navigation__link active" data-ng-href="#!/"><p><i class="material-icons">view_quilt</i></p><p>Dashboard</p></a>
        <a class="navigation__link" data-ng-href="#!/services"><p><i class="material-icons">settings_input_component</i></p> <p>Services</p></a>
        <a class="navigation__link" data-ng-href="#!/plugins"><p><i class="material-icons">extension</i></p> <p>Plugins</p></a>
        <a class="navigation__link" data-ng-href="#!/certificates"><p><i class="material-icons">verified_user</i></p><p>Certificates</p></a>
        <a class="navigation__link" data-ng-href="#!/upstreams"><p><i class="material-icons">backup</i></p><p>Upstreams</p></a>
        <a class="navigation__link" data-ng-href="#!/consumers"><p><i class="material-icons">person_pin</i></p> <p>Consumers</p></a>
    </nav><!-- .navigation -->
</aside>

<main class="content">
    <header class="content__header" data-ng-controller="HeaderController">
        <span class="navigate" data-ng-if="viewFrame.prevUrl.length>=1">
            <a href="{{viewFrame.prevUrl}}" title="Previous"><i class="material-icons">keyboard_arrow_left</i></a>
        </span>
        <span class="title">{{viewFrame.title}}</span>
        <div class="actions" data-ng-if="viewFrame.actionButtons.length>=1">
            <button data-ng-repeat="button in viewFrame.actionButtons" data-target="{{button.target}}" data-url="{{button.url}}" data-redirect="{{button.redirect || viewFrame.prevUrl}}" type="button" class="{{button.styles}}">{{button.displayText}}</button>
        </div>
    </header>
    <section class="content__wrapper {{$root.ngViewAnimation}}" data-ng-view="">Loading...</section>
    <footer class="footer" data-ng-controller="FooterController">
        <div id="staticMessage" class="pull-left hpadding-20"></div>
        <div class="pull-right hpadding-20">{{viewFrame.host | stripProtocol}}</div>
    </footer>
</main>
</div><!-- .app-layout.hidden -->

<script type="text/javascript">
if (typeof module === 'object') {
    window.module = module;
    module = undefined;
}

const {ipcRenderer} = require('electron');
const kongConfig    = ipcRenderer.sendSync('get-config', 'kong');
const appConfig     = ipcRenderer.sendSync('get-config', 'app');

const ngDependency  = ['ngRoute'];
</script>

<script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="js/angular.min.js"></script>
<script type="text/javascript" src="js/angular-route.min.js"></script>
<script type="text/javascript" src="js/angular-animate.min.js"></script>
<script type="text/javascript" src="js/angular-base64.min.js"></script>
<script type="text/javascript" src="scripts/kongdash-app.js"></script>
<script type="text/javascript" src="js/Chart.bundle.min.js"></script>

<script type="text/javascript" src="scripts/app-index.js"></script>

<script type="text/javascript" src="controllers/dashboard.js"></script>
<script type="text/javascript" src="controllers/plugin-edit.js"></script>
<script type="text/javascript" src="controllers/plugin-list.js"></script>
<script type="text/javascript" src="controllers/settings.js"></script>

<script type="module">
    import TokenInputDirective from './components/token-input-directive.js'
    import MultiCheckDirective from './components/multi-check-directive.js';

    import HeaderController from './controllers/header.js';
    import FooterController from './controllers/footer.js';

    import ServiceListController from './controllers/service-list.js';
    import ServiceEditController from './controllers/service-edit.js';

    import RouteEditController from './controllers/route-edit.js';

    import CertificateListController from './controllers/certificate-list.js';
    import CertificateEditController from './controllers/certificate-edit.js';

    import TrustedCAEditController from './controllers/ca-edit.js';

    import UpstreamListController from './controllers/upstream-list.js';
    import UpstreamEditController from './controllers/upstream-edit.js';

    import ConsumerListController from './controllers/consumer-list.js';
    import ConsumerEditController from './controllers/consumer-edit.js';

    app.directive('tokenInput', ['$window', TokenInputDirective]);
    app.directive('multiCheck', ['$window', MultiCheckDirective]);

    app.controller('HeaderController', ['$scope', 'viewFrame', HeaderController]);
    app.controller('FooterController', ['$window', '$scope', '$element', '$http', 'viewFrame', 'toast', FooterController]);

    app.controller('ServiceListController', ['$window', '$scope', 'ajax', 'viewFrame', 'toast', ServiceListController]);
    app.controller('ServiceEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', ServiceEditController]);
    app.controller('RouteEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', RouteEditController]);
    app.controller('CertificateListController', ['$window', '$scope', 'ajax', 'viewFrame', 'toast', CertificateListController]);
    app.controller('CertificateEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', CertificateEditController]);
    app.controller('TrustedCAEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', TrustedCAEditController]);
    app.controller('UpstreamListController', ['$scope', 'ajax', 'viewFrame', 'toast', UpstreamListController]);
    app.controller('UpstreamEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', UpstreamEditController]);
    app.controller('ConsumerListController', ['$scope', 'ajax', 'viewFrame', 'toast', ConsumerListController]);
    app.controller('ConsumerEditController', ['$window', '$scope', '$location', '$routeParams', 'ajax', 'viewFrame', 'toast', ConsumerEditController]);
</script>

<script type="text/javascript">
(function (angular) {
    angular.element('.app-layout').fadeIn({ duration: 1000 });
})(window.angular);
</script>
</body>
</html>
